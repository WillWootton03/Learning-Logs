{% extends 'base.html' %}
{% load static tailwind_tags %}

{% block content %}
<div class="flex flex-box mx-5 pt-24 h-[calc(100vh-3rem)]">
    <div class="grid grid-cols-[1fr_2fr] grid-rows-2 gap-x-20 gap-y-10 w-full h-full">

        <!--Is the small card for Logs-->
        <div class="w-full h-full flex flex-col bg-gray-700 rounded-2xl relative shadow-md shadow-black hover:shadow-[0_0px_15px_rgba(0,0,0,0.9)] hover:shadow-purple-700">
            <div class="text-3xl font-bold mt-2 mb-4 text-center text-white cursor-default drop-shadow-[0_2px_6px_rgba(0,0,0,0.9)]">My Logs</div>
            {% for log in logs %}
                <a href="{% url 'logBreakdown' log.id %}" class="bg-gray-600 w-[90%] h-14 rounded-2xl ml-[5%] my-2 flex justify-between items-center shadow-black shadow-md hover:bg-gray-800">
                    <p class="text-left font-medium text-white px-4">{{ log.title }}</p>
                    <p class="text-right px-4 font-medium text-white">
                        <span class='local-time' data-time="{{ log.dateAdded|date:'c' }}"></span>
                    </p>
                </a>
            {% endfor %}
            <a href="{% url 'newLog' board.id %}" class="absolute top-2 right-2 bg-purple-500 text-black rounded-full px-3.5 py-2 shadow-md shadow-black hover:bg-purple-700">+</a>
        </div>

       <!--Is the large card for Learning Breakdown-->
        <div class="w-full  flex flex-col bg-gray-700 rounded-2xl relative h-[cacl(100vh-8rem)] shadow-md shadow-black hover:shadow-[0_0px_15px_rgba(0,0,0,0.9)] hover:shadow-purple-700">
            <h2 class="text-3xl font-bold mt-2 mb-4 text-center text-white cursor-default drop-shadow-[0_2px_6px_rgba(0,0,0,0.9)]">My Learning Breakdown</h2>
            <div class="flex flex-row h-full mx-8 mt-2 mb-6">
                <!--Div for the learning breakdown graph-->
                <div class="bg-blue-400 h-full w-[35%] ">
                    <h2 class="text-center text-2xl font-bold text-black ">Graph Breakdown</h2>
                </div>
                <div class="bg-gray-600 h-full w-[65%] ml-12 flex-col rounded-2xl">
                    <!--Section for known concepts-->
                    <div class="h-12 my-9 mx-8 rounded-2xl w-[90%] bg-gray-800 flex items-center justify-between shadow-md shadow-black">
                        <h2 class="text-2xl font-bold px-4 text-left text-white">Known Concepts</h2>
                        <h2 class="text-2xl font-bold px-4 text-right text-white">#</h2>
                    </div>
                        <div class="h-12 my-9 mx-8 rounded-2xl w-[90%] bg-gray-800 flex items-center justify-between shadow-md shadow-black">
                        <h2 class="text-2xl font-bold px-4 text-left text-white">Learning Concepts</h2>
                        <h2 class="text-2xl font-bold px-4 text-right text-white">#</h2>
                    </div>
                        <div class="h-12 my-9 mx-8 rounded-2xl w-[90%] bg-gray-800 flex items-center justify-between shadow-md shadow-black">
                        <h2 class="text-2xl text-white font-bold px-4 text-left">Unknown Concepts</h2>
                        <h2 class="text-2xl text-white font-bold px-4 text-right">#</h2>
                    </div>
                </div>
            </div>
        </div>

        <!--Is the small card for Study Sessions-->
        <div class="w-full h-full flex flex-col bg-gray-700 rounded-2xl relative shadow-md shadow-black hover:shadow-[0_0px_15px_rgba(0,0,0,0.9)] hover:shadow-purple-700">
            <h2 class="text-3xl font-bold mt-2 mb-4 text-center text-white cursor-default drop-shadow-[0_2px_6px_rgba(0,0,0,0.9)]">My Study Sessions</h2>
            {% for session in board.sessions.all %}
                <a href="#" class="bg-blue-300 w-[90%] h-14 rounded-2xl ml-[5%] my-2 flex justify-between items-center">
                    <p class="text-left px-4">{{ session.title }}</p>
                    <p class="text-right px-4">{{ session.dateAdded }}</p>
                </a>
                {% endfor %}
            <a href="#" class="absolute top-2 right-2 bg-purple-500 text-black rounded-full px-3.5 py-2 shadow-md shadow-black hover:bg-purple-700">+</a>
        </div>

        <!--Is the larger card for Concepts-->
        <div class="w-full h-full flex flex-col bg-gray-700 rounded-2xl relative shadow-md shadow-black hover:shadow-[0_0px_15px_rgba(0,0,0,0.9)] hover:shadow-purple-700">
            <h2 class="text-3xl font-bold my-2 text-center text-white cursor-default drop-shadow-[0_2px_6px_rgba(0,0,0,0.9)]">My Concepts</h2>
            <div id="concept-grid" class="grid grid-cols-6 w-full h-full auto-rows-min gap-2 p-2">
                {% for concept in board.concepts.all %}
                    {% if concept.known %}
                        <a id="{{ concept.id }}" href="{% url 'setTags' board_id=board.id concept_id=concept.id%}" class="bg-green-600 rounded-2xl py-1 justify-items-center border text-white text-lg border-black shadow-md shadow-black hover:bg-green-800">
                            <h2 class="font-medium mx-2 my-2">{{ concept.answer }}</h2>
                        </a>
                    {% elif concept.unknown %}
                        <a id="{{ concept.id }}" href="{% url 'setTags' board_id=board.id concept_id=concept.id%}" class="bg-red-500 rounded-2xl py-1 justify-items-center border text-white text-lg border-black shadow-md shadow-black hover:bg-red-800">
                            <h2 class="font-medium mx-2 my-2">{{ concept.answer }}</h2>
                        </a>
                    {% else %}
                        <a id="{{ concept.id }}" href="{% url 'setTags' board_id=board.id concept_id=concept.id%}" class="bg-yellow-300 rounded-2xl py-1 justify-items-center border text-white text-lg border-black shadow-md shadow-black hover:bg-yellow-500">
                            <h2 class="font-medium mx-2 my-2">{{ concept.answer }}</h2>
                        </a>
                    {% endif %}
                {% endfor %}
            </div>
            <a href="{% url 'newConcept' board.id %}" class="absolute top-2 right-2 bg-purple-500 text-black rounded-full px-3.5 py-2 shadow-md shadow-black hover:bg-purple-700">+</a>
        </div>
    </div>

</div>
<script>

    document.addEventListener('DOMContentLoaded', () => {
        document.querySelectorAll('.local-time').forEach(span => {
            const UTCDate = new Date(span.dataset.time);
            span.textContent = UTCDate.toLocaleString('en-US', {
                year : 'numeric',
                month : 'short',
                day : 'numeric',
                hour : 'numeric',
                minute : 'numeric'
            });
        });
    });

</script>
{% endblock %}

<!--href="{% url 'newLog' %}"-->